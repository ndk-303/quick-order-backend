openapi: 3.0.3
info:
  title: Quick Order API
  description: |
    API documentation cho h·ªá th·ªëng Quick Order - ·ª®ng d·ª•ng ƒë·∫∑t m√≥n ƒÉn.
    
    ## Authentication
    - S·ª≠ d·ª•ng JWT Bearer Token trong header `Authorization: Bearer <token>`
    - Refresh token ƒë∆∞·ª£c l∆∞u trong httpOnly cookie
    
    ## Icons
    - üîì Public endpoint (kh√¥ng c·∫ßn authentication)
    - üîê Protected endpoint (c·∫ßn JWT token)
  version: 2.0.0
  contact:
    name: Quick Order Team

servers:
  - url: http://localhost:3000
    description: Development server

tags:
  - name: Auth
    description: X√°c th·ª±c ng∆∞·ªùi d√πng
  - name: Users
    description: Qu·∫£n l√Ω ng∆∞·ªùi d√πng
  - name: Restaurants
    description: Qu·∫£n l√Ω nh√† h√†ng
  - name: Reviews
    description: ƒê√°nh gi√° nh√† h√†ng
  - name: Menus
    description: Qu·∫£n l√Ω menu m√≥n ƒÉn
  - name: Tables
    description: Qu·∫£n l√Ω b√†n
  - name: Orders
    description: Qu·∫£n l√Ω ƒë∆°n h√†ng
  - name: Invoices
    description: Qu·∫£n l√Ω h√≥a ƒë∆°n
  - name: Payments
    description: X·ª≠ l√Ω thanh to√°n
  - name: SSE
    description: Server-Sent Events

components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT

  schemas:
    # ============ Auth ============
    RegisterDto:
      type: object
      required:
        - phoneNumber
        - password
        - fullName
      properties:
        phoneNumber:
          type: string
          example: "0901234567"
        password:
          type: string
          example: "password123"
        fullName:
          type: string
          example: "Nguyen Van A"
        address:
          type: string
          example: "123 ABC Street"

    LoginDto:
      type: object
      required:
        - phoneNumber
        - password
      properties:
        phoneNumber:
          type: string
        password:
          type: string

    AuthResponse:
      type: object
      properties:
        accessToken:
          type: string
        user:
          $ref: '#/components/schemas/User'

    # ============ Users ============
    User:
      type: object
      properties:
        _id:
          type: string
        fullName:
          type: string
        email:
          type: string
        phoneNumber:
          type: string
        address:
          type: string
        role:
          type: string
          enum: [CLIENT, RESTAURANT_OWNER, ADMIN]

    UpdateUserDto:
      type: object
      properties:
        fullName:
          type: string
        email:
          type: string
        phoneNumber:
          type: string
        address:
          type: string

    # ============ Restaurant ============
    Restaurant:
      type: object
      properties:
        _id:
          type: string
        name:
          type: string
        address:
          type: string
        imageUrl:
          type: string
        owner:
          type: string
        types:
          type: array
          items:
            type: string

    RestaurantType:
      type: object
      properties:
        _id:
          type: string
        name:
          type: string
        imageUrl:
          type: string

    # ============ Review ============
    CreateReviewDto:
      type: object
      required:
        - rating
      properties:
        rating:
          type: integer
          minimum: 1
          maximum: 5
        comment:
          type: string
        images:
          type: array
          items:
            type: string

    Review:
      type: object
      properties:
        _id:
          type: string
        userId:
          type: string
        restaurantId:
          type: string
        rating:
          type: integer
        comment:
          type: string
        images:
          type: array
          items:
            type: string

    # ============ Menu ============
    MenuItem:
      type: object
      properties:
        _id:
          type: string
        name:
          type: string
        description:
          type: string
        price:
          type: number
        imageUrl:
          type: string
        isAvailable:
          type: boolean
        category:
          type: string
          enum: [food, drink, dessert]
        options:
          type: array
          items:
            $ref: '#/components/schemas/MenuItemConfig'

    MenuItemConfig:
      type: object
      properties:
        name:
          type: string
        isRequired:
          type: boolean
        options:
          type: array
          items:
            type: object
            properties:
              name:
                type: string
              price:
                type: number

    # ============ Table ============
    CreateTableDto:
      type: object
      required:
        - name
        - capacity
      properties:
        name:
          type: string
          example: "B√†n 1"
        capacity:
          type: integer
          example: 4
        isActive:
          type: boolean
          default: true

    Table:
      type: object
      properties:
        _id:
          type: string
        name:
          type: string
        capacity:
          type: integer
        restaurant:
          type: string
        token:
          type: string
        qrImage:
          type: string
        isActive:
          type: boolean

    # ============ Order ============
    CreateOrderDto:
      type: object
      required:
        - restaurantId
        - tableId
        - items
        - lat
        - long
      properties:
        restaurantId:
          type: string
          description: MongoDB ObjectId
        tableId:
          type: string
          description: MongoDB ObjectId
        items:
          type: array
          minItems: 1
          items:
            $ref: '#/components/schemas/OrderItemDto'
        lat:
          type: number
        long:
          type: number

    OrderItemDto:
      type: object
      required:
        - menuItemId
        - quantity
      properties:
        menuItemId:
          type: string
        quantity:
          type: integer
          minimum: 1
        selectedOptions:
          type: array
          items:
            type: object
            properties:
              name:
                type: string
              price:
                type: number
        note:
          type: string

    Order:
      type: object
      properties:
        _id:
          type: string
        userId:
          type: string
        restaurantId:
          type: string
        tableId:
          type: string
        items:
          type: array
          items:
            $ref: '#/components/schemas/OrderItemSnapshot'
        totalAmount:
          type: number
        status:
          $ref: '#/components/schemas/OrderStatus'

    OrderItemSnapshot:
      type: object
      properties:
        menuItemId:
          type: string
        name:
          type: string
        price:
          type: number
        quantity:
          type: integer
        selectedOptions:
          type: array
          items:
            type: object
            properties:
              name:
                type: string
              price:
                type: number
        note:
          type: string
        status:
          $ref: '#/components/schemas/OrderStatus'

    OrderStatus:
      type: string
      enum: [PENDING, COOKING, COMPLETED, CANCELED]

    UpdateOrderItemStatusDto:
      type: object
      required:
        - status
      properties:
        status:
          $ref: '#/components/schemas/OrderStatus'

    # ============ Invoice ============
    CreateInvoiceDto:
      type: object
      required:
        - restaurantId
        - tableId
        - items
      properties:
        userId:
          type: string
        restaurantId:
          type: string
        tableId:
          type: string
        items:
          type: array
          items:
            $ref: '#/components/schemas/InvoiceItemDto'

    InvoiceItemDto:
      type: object
      required:
        - menuItemId
        - quantity
      properties:
        menuItemId:
          type: string
        quantity:
          type: integer
        note:
          type: string

    Invoice:
      type: object
      properties:
        _id:
          type: string
        userId:
          type: string
        restaurantId:
          type: string
        tableId:
          type: string
        items:
          type: array
          items:
            $ref: '#/components/schemas/InvoiceItemSnapshot'
        totalAmount:
          type: number
        status:
          $ref: '#/components/schemas/InvoiceStatus'
        paymentMethod:
          $ref: '#/components/schemas/PaymentMethod'

    InvoiceItemSnapshot:
      type: object
      properties:
        menuItemId:
          type: string
        name:
          type: string
        price:
          type: number
        quantity:
          type: integer
        note:
          type: string

    InvoiceStatus:
      type: string
      enum: [PENDING, PAID, CANCELLED]

    # ============ Payment ============
    CreatePaymentDto:
      type: object
      required:
        - invoiceId
        - method
      properties:
        invoiceId:
          type: string
        method:
          $ref: '#/components/schemas/PaymentMethod'

    PaymentMethod:
      type: string
      enum: [BANK, MOMO, ZALOPAY]

    PaymentResponse:
      type: object
      properties:
        success:
          type: boolean
        message:
          type: string
        orderId:
          type: string
        invoiceId:
          type: string

paths:
  # ============ AUTH ============
  /auth/register:
    post:
      tags: [Auth]
      summary: ƒêƒÉng k√Ω t√†i kho·∫£n m·ªõi
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RegisterDto'
      responses:
        '201':
          description: ƒêƒÉng k√Ω th√†nh c√¥ng
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AuthResponse'

  /auth/login:
    post:
      tags: [Auth]
      summary: ƒêƒÉng nh·∫≠p
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LoginDto'
      responses:
        '200':
          description: ƒêƒÉng nh·∫≠p th√†nh c√¥ng
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AuthResponse'

  /auth/refresh:
    post:
      tags: [Auth]
      summary: L√†m m·ªõi access token
      description: Y√™u c·∫ßu refresh_token trong cookie
      responses:
        '200':
          description: Token ƒë√£ ƒë∆∞·ª£c l√†m m·ªõi
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AuthResponse'

  /auth/logout:
    post:
      tags: [Auth]
      summary: ƒêƒÉng xu·∫•t
      security:
        - bearerAuth: []
      responses:
        '200':
          description: ƒêƒÉng xu·∫•t th√†nh c√¥ng

  /auth/forgot-password:
    post:
      tags: [Auth]
      summary: Reset m·∫≠t kh·∫©u (Demo)
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                phoneNumber:
                  type: string
                newPassword:
                  type: string
      responses:
        '200':
          description: M·∫≠t kh·∫©u ƒë√£ ƒë∆∞·ª£c reset

  /auth/forgot-password/request-otp:
    post:
      tags: [Auth]
      summary: Y√™u c·∫ßu OTP ƒë·ªÉ reset m·∫≠t kh·∫©u
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                phoneNumber:
                  type: string
      responses:
        '200':
          description: OTP ƒë√£ ƒë∆∞·ª£c g·ª≠i

  /auth/forgot-password/verify-otp:
    post:
      tags: [Auth]
      summary: X√°c th·ª±c OTP v√† reset m·∫≠t kh·∫©u
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                phoneNumber:
                  type: string
                otp:
                  type: string
                newPassword:
                  type: string
      responses:
        '200':
          description: M·∫≠t kh·∫©u ƒë√£ ƒë∆∞·ª£c reset

  /auth/health:
    get:
      tags: [Auth]
      summary: Health check
      responses:
        '200':
          description: OK

  /auth/google:
    get:
      tags: [Auth]
      summary: Google OAuth login
      responses:
        '302':
          description: Redirect to Google

  /auth/google/callback:
    get:
      tags: [Auth]
      summary: Google OAuth callback
      responses:
        '302':
          description: Redirect with tokens

  # ============ USERS ============
  /users/me:
    get:
      tags: [Users]
      summary: L·∫•y th√¥ng tin profile
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Th√†nh c√¥ng
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
    patch:
      tags: [Users]
      summary: C·∫≠p nh·∫≠t profile
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateUserDto'
      responses:
        '200':
          description: C·∫≠p nh·∫≠t th√†nh c√¥ng
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'

  # ============ RESTAURANTS ============
  /restaurants:
    get:
      tags: [Restaurants]
      summary: L·∫•y danh s√°ch nh√† h√†ng
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Th√†nh c√¥ng
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Restaurant'
    post:
      tags: [Restaurants]
      summary: T·∫°o nh√† h√†ng m·ªõi
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                name:
                  type: string
                address:
                  type: string
                types:
                  type: array
                  items:
                    type: string
                image:
                  type: string
                  format: binary
      responses:
        '201':
          description: T·∫°o th√†nh c√¥ng

  /restaurants/{id}:
    get:
      tags: [Restaurants]
      summary: L·∫•y chi ti·∫øt nh√† h√†ng
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Th√†nh c√¥ng
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Restaurant'

  /restaurants/types:
    get:
      tags: [Restaurants]
      summary: L·∫•y danh s√°ch lo·∫°i nh√† h√†ng
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Th√†nh c√¥ng
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/RestaurantType'
    post:
      tags: [Restaurants]
      summary: T·∫°o lo·∫°i nh√† h√†ng m·ªõi
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                name:
                  type: string
                image:
                  type: string
                  format: binary
      responses:
        '201':
          description: T·∫°o th√†nh c√¥ng

  /restaurants/favorites:
    get:
      tags: [Restaurants]
      summary: L·∫•y danh s√°ch nh√† h√†ng y√™u th√≠ch
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Th√†nh c√¥ng

  /restaurants/favorites/{restaurantId}:
    post:
      tags: [Restaurants]
      summary: Th√™m nh√† h√†ng v√†o y√™u th√≠ch
      security:
        - bearerAuth: []
      parameters:
        - name: restaurantId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Th√†nh c√¥ng
    delete:
      tags: [Restaurants]
      summary: X√≥a nh√† h√†ng kh·ªèi y√™u th√≠ch
      security:
        - bearerAuth: []
      parameters:
        - name: restaurantId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Th√†nh c√¥ng

  # ============ REVIEWS ============
  /reviews/me:
    get:
      tags: [Reviews]
      summary: L·∫•y ƒë√°nh gi√° c·ªßa user hi·ªán t·∫°i
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Th√†nh c√¥ng
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Review'

  /reviews/{restaurantId}:
    get:
      tags: [Reviews]
      summary: L·∫•y ƒë√°nh gi√° c·ªßa nh√† h√†ng
      parameters:
        - name: restaurantId
          in: path
          required: true
          schema:
            type: string
        - name: page
          in: query
          schema:
            type: integer
            default: 1
        - name: limit
          in: query
          schema:
            type: integer
            default: 10
      responses:
        '200':
          description: Th√†nh c√¥ng
    post:
      tags: [Reviews]
      summary: T·∫°o ƒë√°nh gi√°
      security:
        - bearerAuth: []
      parameters:
        - name: restaurantId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateReviewDto'
      responses:
        '201':
          description: T·∫°o th√†nh c√¥ng

  /reviews/{reviewId}:
    patch:
      tags: [Reviews]
      summary: C·∫≠p nh·∫≠t ƒë√°nh gi√°
      security:
        - bearerAuth: []
      parameters:
        - name: reviewId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateReviewDto'
      responses:
        '200':
          description: C·∫≠p nh·∫≠t th√†nh c√¥ng
    delete:
      tags: [Reviews]
      summary: X√≥a ƒë√°nh gi√°
      security:
        - bearerAuth: []
      parameters:
        - name: reviewId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: X√≥a th√†nh c√¥ng

  # ============ MENUS ============
  /menus:
    get:
      tags: [Menus]
      summary: L·∫•y menu (Admin)
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Th√†nh c√¥ng
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/MenuItem'
    post:
      tags: [Menus]
      summary: T·∫°o m√≥n ƒÉn m·ªõi
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                name:
                  type: string
                description:
                  type: string
                price:
                  type: number
                category:
                  type: string
                image:
                  type: string
                  format: binary
      responses:
        '201':
          description: T·∫°o th√†nh c√¥ng

  /menus/{id}:
    get:
      tags: [Menus]
      summary: L·∫•y th√¥ng tin m√≥n ƒÉn
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Th√†nh c√¥ng
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MenuItem'
    patch:
      tags: [Menus]
      summary: C·∫≠p nh·∫≠t m√≥n ƒÉn
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: C·∫≠p nh·∫≠t th√†nh c√¥ng
    delete:
      tags: [Menus]
      summary: X√≥a m√≥n ƒÉn
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: X√≥a th√†nh c√¥ng

  /menus/{restaurantId}/{tableId}:
    get:
      tags: [Menus]
      summary: L·∫•y menu cho kh√°ch (qu√©t QR)
      parameters:
        - name: restaurantId
          in: path
          required: true
          schema:
            type: string
        - name: tableId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Th√†nh c√¥ng
          content:
            application/json:
              schema:
                type: object
                properties:
                  table:
                    $ref: '#/components/schemas/Table'
                  menu:
                    type: array
                    items:
                      $ref: '#/components/schemas/MenuItem'

  # ============ TABLES ============
  /tables:
    get:
      tags: [Tables]
      summary: L·∫•y danh s√°ch b√†n
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Th√†nh c√¥ng
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Table'
    post:
      tags: [Tables]
      summary: T·∫°o b√†n m·ªõi
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateTableDto'
      responses:
        '201':
          description: T·∫°o th√†nh c√¥ng

  /tables/{id}:
    get:
      tags: [Tables]
      summary: L·∫•y th√¥ng tin b√†n
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Th√†nh c√¥ng
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Table'
    patch:
      tags: [Tables]
      summary: C·∫≠p nh·∫≠t th√¥ng tin b√†n
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: C·∫≠p nh·∫≠t th√†nh c√¥ng
    delete:
      tags: [Tables]
      summary: X√≥a b√†n
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: X√≥a th√†nh c√¥ng

  /tables/{id}/qr:
    post:
      tags: [Tables]
      summary: T·∫°o m√£ QR cho b√†n
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Th√†nh c√¥ng

  # ============ ORDERS ============
  /orders:
    get:
      tags: [Orders]
      summary: L·∫•y ƒë∆°n h√†ng (Restaurant Owner)
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Th√†nh c√¥ng
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Order'
    post:
      tags: [Orders]
      summary: T·∫°o ƒë∆°n h√†ng m·ªõi
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateOrderDto'
      responses:
        '201':
          description: T·∫°o th√†nh c√¥ng

  /orders/client:
    get:
      tags: [Orders]
      summary: L·∫•y ƒë∆°n h√†ng c·ªßa kh√°ch
      security:
        - bearerAuth: []
      parameters:
        - name: status
          in: query
          schema:
            type: array
            items:
              $ref: '#/components/schemas/OrderStatus'
      responses:
        '200':
          description: Th√†nh c√¥ng
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Order'

  /orders/kitchen/{restaurantId}:
    get:
      tags: [Orders]
      summary: L·∫•y ƒë∆°n h√†ng cho b·∫øp
      security:
        - bearerAuth: []
      parameters:
        - name: restaurantId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Th√†nh c√¥ng
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Order'

  /orders/{id}:
    get:
      tags: [Orders]
      summary: L·∫•y chi ti·∫øt ƒë∆°n h√†ng
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Th√†nh c√¥ng
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Order'

  /orders/{orderId}/items/{itemId}/status:
    patch:
      tags: [Orders]
      summary: C·∫≠p nh·∫≠t tr·∫°ng th√°i m√≥n
      security:
        - bearerAuth: []
      parameters:
        - name: orderId
          in: path
          required: true
          schema:
            type: string
        - name: itemId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateOrderItemStatusDto'
      responses:
        '200':
          description: C·∫≠p nh·∫≠t th√†nh c√¥ng

  # ============ INVOICES ============
  /invoices:
    get:
      tags: [Invoices]
      summary: L·∫•y h√≥a ƒë∆°n c·ªßa user
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Th√†nh c√¥ng
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Invoice'
    post:
      tags: [Invoices]
      summary: T·∫°o h√≥a ƒë∆°n
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateInvoiceDto'
      responses:
        '201':
          description: T·∫°o th√†nh c√¥ng

  /invoices/{id}:
    get:
      tags: [Invoices]
      summary: L·∫•y chi ti·∫øt h√≥a ƒë∆°n
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Th√†nh c√¥ng
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Invoice'

  # ============ PAYMENTS ============
  /payments:
    post:
      tags: [Payments]
      summary: X·ª≠ l√Ω thanh to√°n
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreatePaymentDto'
      responses:
        '200':
          description: Thanh to√°n th√†nh c√¥ng
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaymentResponse'

  # ============ SSE ============
  /sse/orders/{restaurantId}:
    get:
      tags: [SSE]
      summary: SSE stream ƒë∆°n h√†ng nh√† h√†ng
      security:
        - bearerAuth: []
      parameters:
        - name: restaurantId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: SSE Stream
          content:
            text/event-stream:
              schema:
                type: string

  /sse/user:
    get:
      tags: [SSE]
      summary: SSE stream ƒë∆°n h√†ng c·ªßa user
      description: userId ƒë∆∞·ª£c l·∫•y t·ª´ JWT token
      security:
        - bearerAuth: []
      responses:
        '200':
          description: SSE Stream
          content:
            text/event-stream:
              schema:
                type: string
